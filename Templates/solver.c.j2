#include "stdlib.h"
#include "math.h"
#include <string.h>
#include <stdio.h>

struct dataobj
{
    void *restrict data;
    int * size;
} ;


int Solver(const float dt, const float h_x, const float h_y, struct dataobj *restrict u_vec, const int time_M, const int time_m, const int x_M, const int x_m, const int y_M, const int y_m)
{
    double (*restrict u)[u_vec->size[1]][u_vec->size[2]] = (double (*)[u_vec->size[1]][u_vec->size[2]]) u_vec->data;

    {{code}}

    FILE *f;

    f = fopen("myOutput1","w");

    for (int t = 0; t < 3; t += 1) {
        for (int x = 0; x < x_M; x += 1) {
            for (int y = 0; y < y_M; y += 1) {
                fprintf(f, "u[%d][%d][%d] %f\n", t, x, y, u[t][x][y]);
            };
        };
    }

    fclose(f);

    return 0;
}

int main() {
    int i = {{params.u_shape[0]}};
    int j = {{params.u_shape[1]}};
    int k = {{params.u_shape[2]}};

    int size[3] = {i,j,k};
    
    double myarray[{{params.u_shape[0]}}][{{params.u_shape[1]}}][{{params.u_shape[2]}}] = {{params.u_data}};

    struct dataobj u_vec = { .data = myarray, .size = size };

    Solver({{params.dt}}, {{params.step_x}}, {{params.step_y}}, &u_vec, {{params.max_time}}, {{params.min_time}}, {{params.max_x}}, {{params.min_x}}, {{params.max_y}}, {{params.min_y}});

    return 0;
}